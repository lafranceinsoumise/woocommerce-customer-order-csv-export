"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(g){var c=new Date(1970,1,1,0,0,0),k=86400,s={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1},T={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},v={init:function(n){return this.each(function(){var e,i=g(this),t=[];for(e in s)i.data(e)&&(t[e]=i.data(e));var a=g.extend({},s,t,n);a.lang&&(T=g.extend(T,a.lang)),a=r(a),i.data("timepicker-settings",a),i.addClass("ui-timepicker-input"),a.useSelect?o(i):(i.prop("autocomplete","off"),i.on("click.timepicker focus.timepicker",v.show),i.on("change.timepicker",u),i.on("keydown.timepicker",p),i.on("keyup.timepicker",d),u.call(i.get(0)))})},show:function(e){e&&e.preventDefault();var e=g(this),i=e.data("timepicker-settings");if(i.useSelect)e.data("timepicker-list").focus();else{w(e)&&e.blur();var t,a=e.data("timepicker-list");if(!e.prop("readonly"))if(a&&0!==a.length&&"function"!=typeof i.durationTime||(o(e),a=e.data("timepicker-list")),!a.is(":visible"))return v.hide(),a.show(),t={},"rtl"==i.orientation?t.left=e.offset().left+e.outerWidth()-a.outerWidth()+parseInt(a.css("marginLeft").replace("px",""),10):t.left=e.offset().left+parseInt(a.css("marginLeft").replace("px",""),10),e.offset().top+e.outerHeight(!0)+a.outerHeight()>g(window).height()+g(window).scrollTop()?t.top=e.offset().top-a.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10):t.top=e.offset().top+e.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10),a.offset(t),(t=a.find(".ui-timepicker-selected")).length||(m(e)?t=l(e,a,R(m(e))):i.scrollDefaultNow?t=l(e,a,R(new Date)):!1!==i.scrollDefaultTime&&(t=l(e,a,R(i.scrollDefaultTime)))),t&&t.length?(t=a.scrollTop()+t.position().top-t.outerHeight(),a.scrollTop(t)):a.scrollTop(0),g(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",n),i.closeOnWindowScroll&&g(document).on("scroll.ui-timepicker",n),e.trigger("showTimepicker"),this}},hide:function(e){var i=g(this),t=i.data("timepicker-settings");return t&&t.useSelect&&i.blur(),g(".ui-timepicker-wrapper:visible").each(function(){var e=g(this),i=e.data("timepicker-input"),t=i.data("timepicker-settings");t&&t.selectOnBlur&&C(i),e.hide(),i.trigger("hideTimepicker")}),this},option:function(e,i){var t=this,a=t.data("timepicker-settings"),n=t.data("timepicker-list");if("object"==(void 0===e?"undefined":_typeof(e)))a=g.extend(a,e);else if("string"==typeof e&&void 0!==i)a[e]=i;else if("string"==typeof e)return a[e];return a=r(a),t.data("timepicker-settings",a),n&&(n.remove(),t.data("timepicker-list",!1)),a.useSelect&&o(t),this},getSecondsFromMidnight:function(){return R(m(this))},getTime:function(e){var i=m(this);if(!i)return null;e=e||new Date;i=R(i),e=new Date(e);return e.setHours(i/3600),e.setMinutes(i%3600/60),e.setSeconds(i%60),e.setMilliseconds(0),e},setTime:function(e){var i=this,e=S(R(e),i.data("timepicker-settings").timeFormat);return H(i,e),i.data("timepicker-list")&&x(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input"))return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),e.removeData("timepicker-list"),this}};function r(e){if(e.minTime&&(e.minTime=R(e.minTime)),e.maxTime&&(e.maxTime=R(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=R(e.durationTime)),0<e.disableTimeRanges.length){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[R(e.disableTimeRanges[i][0]),R(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(i=e.disableTimeRanges.length-1;0<i;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function o(i){var t,e=i.data("timepicker-settings"),a=i.data("timepicker-list");if(a&&a.length&&(a.remove(),i.data("timepicker-list",!1)),e.useSelect?t=a=g("<select />",{class:"ui-timepicker-select"}):(a=g("<ul />",{class:"ui-timepicker-list"}),(t=g("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(a)),e.noneOption)if(!0===e.noneOption&&(e.noneOption=e.useSelect?"Time...":"None"),g.isArray(e.noneOption))for(var n in e.noneOption){var s=b(e.noneOption[n],e.useSelect);a.append(s)}else{s=b(e.noneOption,e.useSelect);a.append(s)}e.className&&t.addClass(e.className),null===e.minTime&&null===e.durationTime||!e.showDuration||t.addClass("ui-timepicker-with-duration");for(var r=e.minTime,o=("function"==typeof e.durationTime?r=R(e.durationTime()):null!==e.durationTime&&(r=e.durationTime),null!==e.minTime?e.minTime:0),c=null!==e.maxTime?e.maxTime:o+k-1,l=(c<=o&&(c+=k),c===k-1&&-1!==e.timeFormat.indexOf("H")&&(c=k),e.disableTimeRanges),u=0,m=l.length,n=o;n<=c;n+=60*e.step){var p,d,f=n,h=S(f,e.timeFormat);(e.useSelect?p=g("<option />",{value:h}):((p=g("<li />")).data("time",f<=86400?f:f%86400),p)).text(h),null===e.minTime&&null===e.durationTime||!e.showDuration||(h=function(e){var e=Math.round(e/60);e=Math.abs(e)<60?[e,T.mins]:60==e?["1",T.hr]:(e=(e/60).toFixed(1),[e="."!=T.decimal?e.replace(".",T.decimal):e,T.hrs]);return e.join(" ")}(n-r),e.useSelect?p.text(p.text()+" ("+h+")"):((d=g("<span />",{class:"ui-timepicker-duration"})).text(" ("+h+")"),p.append(d))),u<m&&(f>=l[u][1]&&(u+=1),l[u])&&f>=l[u][0]&&f<l[u][1]&&(e.useSelect?p.prop("disabled",!0):p.addClass("ui-timepicker-disabled")),a.append(p)}t.data("timepicker-input",i),i.data("timepicker-list",t),e.useSelect?(a.val(y(i.val(),e)),a.on("focus",function(){g(this).data("timepicker-input").trigger("showTimepicker")}),a.on("blur",function(){g(this).data("timepicker-input").trigger("hideTimepicker")}),a.on("change",function(){H(i,g(this).val(),"select")}),i.hide().after(a)):("string"==typeof(o=e.appendTo)?o=g(o):"function"==typeof o&&(o=o(i)),o.append(t),x(i,a),a.on("click","li",function(e){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",v.show)}),w(i)||i[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),g(this).addClass("ui-timepicker-selected"),C(i)&&(i.trigger("hideTimepicker"),t.hide())}))}function b(e,i){var t,a,n;return"object"==(void 0===e?"undefined":_typeof(e))?(t=e.label,a=e.className,n=e.value):"string"==typeof e?t=e:g.error("Invalid noneOption value"),i?g("<option />",{value:n,class:a,text:t}):g("<li />",{class:a,text:t}).data("time",n)}function y(e,i){var t;return null===(e=g.isNumeric(e)?e:R(e))?null:(t=60*i.step,S(Math.round(e/t)*t,i.timeFormat))}function n(e){e=g(e.target);0===e.closest(".ui-timepicker-input").length&&0===e.closest(".ui-timepicker-wrapper").length&&(v.hide(),g(document).unbind(".ui-timepicker"))}function w(e){e=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&e.disableTouchKeyboard}function l(e,i,a){var n,s;return!(!a&&0!==a)&&(e=e.data("timepicker-settings"),n=!1,s=30*e.step,i.find("li").each(function(e,i){var t,i=g(i);if("number"==typeof i.data("time"))return t=i.data("time")-a,Math.abs(t)<s||t==s?(n=i,!1):void 0}),n)}function x(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=R(m(e));null!==t&&(e=l(e,i,t))&&(((t=e.offset().top-i.offset().top)+e.outerHeight()>i.outerHeight()||t<0)&&i.scrollTop(i.scrollTop()+e.position().top-e.outerHeight()),e.addClass("ui-timepicker-selected"))}function u(e){var i,t,a,n;""!==this.value&&((i=g(this)).data("timepicker-list"),!i.is(":focus")||e&&"change"==e.type)&&(null===(t=R(this.value))?i.trigger("timeFormatError"):(e=i.data("timepicker-settings"),a=!1,(null!==e.minTime&&t<e.minTime||null!==e.maxTime&&t>e.maxTime)&&(a=!0),g.each(e.disableTimeRanges,function(){if(t>=this[0]&&t<this[1])return!(a=!0)}),e.forceRoundTime&&((n=t%(60*e.step))>=30*e.step?t+=60*e.step-n:t-=n),n=S(t,e.timeFormat),a?H(i,n,"error")&&i.trigger("timeRangeError"):H(i,n)))}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function H(e,i,t){var a;if(e.is("input")&&(e.val(i),(a=e.data("timepicker-settings")).useSelect)&&e.data("timepicker-list").val(y(i,a)),e.data("ui-timepicker-value")!=i)return e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change"):"error"!=t&&e.trigger("changeTime"),1;e.trigger("selectTime")}function p(e){var i=g(this),t=i.data("timepicker-list");if(!t||!t.is(":visible")){if(40!=e.keyCode)return!0;w(i)||i.focus()}switch(e.keyCode){case 13:return C(i)&&v.hide.apply(this),e.preventDefault(),!1;case 38:var a=t.find(".ui-timepicker-selected");return a.length?a.is(":first-child")||(a.removeClass("ui-timepicker-selected"),a.prev().addClass("ui-timepicker-selected"),a.prev().position().top<a.outerHeight()&&t.scrollTop(t.scrollTop()-a.outerHeight())):(t.find("li").each(function(e,i){if(0<g(i).position().top)return a=g(i),!1}),a.addClass("ui-timepicker-selected")),!1;case 40:return 0===(a=t.find(".ui-timepicker-selected")).length?(t.find("li").each(function(e,i){if(0<g(i).position().top)return a=g(i),!1}),a.addClass("ui-timepicker-selected")):a.is(":last-child")||(a.removeClass("ui-timepicker-selected"),a.next().addClass("ui-timepicker-selected"),a.next().position().top+2*a.outerHeight()>t.outerHeight()&&t.scrollTop(t.scrollTop()+a.outerHeight())),!1;case 27:t.find("li").removeClass("ui-timepicker-selected"),v.hide();break;case 9:v.hide();break;default:return!0}}function d(e){var i=g(this),t=i.data("timepicker-list");if(!t||!t.is(":visible"))return!0;if(!i.data("timepicker-settings").typeaheadHighlight)return t.find("li").removeClass("ui-timepicker-selected"),!0;switch(e.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:x(i,t);break;default:return}}function C(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),a=null,n=t.find(".ui-timepicker-selected");return!n.hasClass("ui-timepicker-disabled")&&(n.length?a=n.data("time"):m(e)&&(a=R(m(e)),x(e,t)),null!==a&&("string"==typeof a?e.val(a):H(e,S(a,i.timeFormat),"select")),1)}function S(e,i){if(null!==e){var t=new Date(c.valueOf()+1e3*e);if(!isNaN(t.getTime())){for(var a,n,s="",r=0;r<i.length;r++)switch(n=i.charAt(r)){case"a":s+=11<t.getHours()?T.pm:T.am;break;case"A":s+=11<t.getHours()?T.PM:T.AM;break;case"g":s+=0===(a=t.getHours()%12)?"12":a;break;case"G":s+=t.getHours();break;case"h":s+=0===(a=0!==(a=t.getHours()%12)&&a<10?"0"+a:a)?"12":a;break;case"H":a=t.getHours(),s+=9<(a=e===k?24:a)?a:"0"+a;break;case"i":var o=t.getMinutes();s+=9<o?o:"0"+o;break;case"s":s+=9<(e=t.getSeconds())?e:"0"+e;break;default:s+=n}return s}}}function R(e){if(""===e)return null;if(!e||e+0==e)return e;e=(e="object"==(void 0===e?"undefined":_typeof(e))?e.getHours()+":"+t(e.getMinutes())+":"+t(e.getSeconds()):e).toLowerCase();new Date(0);var i=-1===e.indexOf(":")?(i=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))||e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/):e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/);return i?(e=parseInt(+i[1],10),3600*(i[4]?12==e?"p"==i[4]?12:0:e+("p"==i[4]?12:0):e)+60*(+i[2]||0)+(+i[3]||0)):null}function t(e){return("0"+e).slice(-2)}g.fn.timepicker=function(e){return this.length?v[e]?this.hasClass("ui-timepicker-input")?v[e].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!==(void 0===e?"undefined":_typeof(e))&&e?void g.error("Method "+e+" does not exist on jQuery.timepicker"):v.init.apply(this,arguments):this}});